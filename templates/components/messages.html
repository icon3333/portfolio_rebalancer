{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            {% set alert_class = {
                'error': 'alert-error',
                'danger': 'alert-error',
                'warning': 'alert-warning',
                'info': 'alert-info',
                'success': 'alert-success'
            }.get(category, 'alert-info') %}

            <div class="alert {{ alert_class }} message-notification d-flex justify-content-between align-items-start" role="alert">
                <span>{{ message }}</span>
                <button type="button" class="btn-close ms-3" aria-label="Close" onclick="this.parentElement.remove()"></button>
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}

<script>
    // Auto-dismiss notifications after 5 seconds
    document.addEventListener('DOMContentLoaded', () => {
        const notifications = document.querySelectorAll('.message-notification');

        notifications.forEach(notification => {
            // Auto-dismiss after 5 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.3s ease';

                // Remove element after fade-out animation
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 5000);
        });
    });
</script>
