{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            {% set message_class = {
                'error': 'is-danger',
                'warning': 'is-warning',
                'info': 'is-info',
                'success': 'is-success'
            }.get(category, 'is-info') %}
            
            <div class="notification {{ message_class }} message-notification notification-overlay">
                <button class="delete"></button>
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}

<script>
    // Auto-dismiss notifications after 5 seconds
    document.addEventListener('DOMContentLoaded', () => {
        const notifications = document.querySelectorAll('.message-notification');
        
        notifications.forEach(notification => {
            // Add click event for delete button
            const deleteButton = notification.querySelector('.delete');
            if (deleteButton) {
                deleteButton.addEventListener('click', () => {
                    notification.remove();
                });
            }
            
            // Auto-dismiss after 5 seconds
            setTimeout(() => {
                notification.classList.add('is-fading-out');
                
                // Remove element after fade-out animation (0.5s)
                setTimeout(() => {
                    notification.remove();
                }, 500);
            }, 5000);
        });
    });
</script>